Notebook[
 {
  Cell[
   CellGroupData[
    {
     Cell["Advanced Compilation Topics", "Title"],
     Cell[
      TextData[
       {
        "Copy from ",
        ButtonBox[
         "WTC2018: Advanced Compilation Topics",
         BaseStyle -> "Hyperlink",
         ButtonData -> {
          URL["https://www.wolfram.com/broadcast/video.php?v=2391"],
          None
         },
         ButtonNote -> "https://www.wolfram.com/broadcast/video.php?v=2391"
        ]
       }
      ],
      "Abstract"
     ],
     Cell[
      CellGroupData[
       {
        Cell["Call LibC", "Section"],
        Cell[
         BoxData[
          RowBox[
           {
            RowBox[
             {
              "prog",
              "=",
              RowBox[
               {
                "Compile`Program",
                "[",
                RowBox[
                 {
                  "{",
                  "\[IndentingNewLine]",
                  RowBox[
                   {
                    RowBox[
                     {
                      "Compile`DeclareFunction",
                      "[",
                      "\[IndentingNewLine]",
                      RowBox[
                       {
                        RowBox[
                         {"Native`PrimitiveFunction", "[", "\"C`Malloc\"", "]"}
                        ],
                        ",",
                        "\[IndentingNewLine]",
                        RowBox[
                         {
                          RowBox[
                           {
                            "TypeFramework`MetaData",
                            "[",
                            RowBox[
                             {
                              "<|",
                              RowBox[
                               {
                                RowBox[{"\"Linkage\"", "\[Rule]", "\"ExternalLibrary\""}],
                                ",",
                                RowBox[
                                 {"\"ExternalFunctionName\"", "\[Rule]", "\"malloc\""}
                                ]
                               }
                              ],
                              "|>"
                             }
                            ],
                            "]"
                           }
                          ],
                          "@",
                          RowBox[
                           {
                            "TypeSpecifier",
                            "[",
                            RowBox[
                             {
                              RowBox[{"{", "\"MachineInteger\"", "}"}],
                              "\[Rule]",
                              "\"VoidHandle\""
                             }
                            ],
                            "]"
                           }
                          ]
                         }
                        ]
                       }
                      ],
                      "\[IndentingNewLine]",
                      "]"
                     }
                    ],
                    ",",
                    "\[IndentingNewLine]",
                    RowBox[
                     {
                      "Compile`DeclareFunction",
                      "[",
                      "\[IndentingNewLine]",
                      RowBox[
                       {
                        RowBox[
                         {"Native`PrimitiveFunction", "[", "\"C`Free\"", "]"}
                        ],
                        ",",
                        "\[IndentingNewLine]",
                        RowBox[
                         {
                          RowBox[
                           {
                            "TypeFramework`MetaData",
                            "[",
                            RowBox[
                             {
                              "<|",
                              RowBox[
                               {
                                RowBox[{"\"Linkage\"", "\[Rule]", "\"ExternalLibrary\""}],
                                ",",
                                RowBox[{"\"ExternalFunctionName\"", "\[Rule]", "\"free\""}]
                               }
                              ],
                              "|>"
                             }
                            ],
                            "]"
                           }
                          ],
                          "@",
                          RowBox[
                           {
                            "TypeSpecifier",
                            "[",
                            RowBox[
                             {
                              RowBox[{"{", "\"VoidHandle\"", "}"}],
                              "\[Rule]",
                              "\"Void\""
                             }
                            ],
                            "]"
                           }
                          ]
                         }
                        ]
                       }
                      ],
                      "\[IndentingNewLine]",
                      "]"
                     }
                    ],
                    ",",
                    "\[IndentingNewLine]",
                    RowBox[
                     {
                      "Function",
                      "[",
                      RowBox[
                       {
                        RowBox[
                         {
                          "{",
                          RowBox[
                           {"Typed", "[", RowBox[{"sz", ",", "\"Integer64\""}], "]"}
                          ],
                          "}"
                         }
                        ],
                        ",",
                        "\[IndentingNewLine]",
                        RowBox[
                         {
                          "Module",
                          "[",
                          RowBox[
                           {
                            RowBox[
                             {"{", RowBox[{"buf", ",", "arry", ",", "val"}], "}"}
                            ],
                            ",",
                            "\[IndentingNewLine]",
                            RowBox[
                             {
                              RowBox[
                               {
                                "buf",
                                "=",
                                RowBox[
                                 {
                                  RowBox[
                                   {"Native`PrimitiveFunction", "[", "\"C`Malloc\"", "]"}
                                  ],
                                  "[",
                                  "sz",
                                  "]"
                                 }
                                ]
                               }
                              ],
                              ";",
                              "\[IndentingNewLine]",
                              RowBox[
                               {
                                "arry",
                                "=",
                                RowBox[
                                 {
                                  "Native`BitCast",
                                  "[",
                                  RowBox[
                                   {
                                    "buf",
                                    ",",
                                    RowBox[{"\"CArray\"", "[", "\"Integer64\"", "]"}]
                                   }
                                  ],
                                  "]"
                                 }
                                ]
                               }
                              ],
                              ";",
                              "\[IndentingNewLine]",
                              RowBox[
                               {
                                "val",
                                "=",
                                RowBox[{"arry", "[", RowBox[{"[", "0", "]"}], "]"}]
                               }
                              ],
                              ";",
                              "\[IndentingNewLine]",
                              RowBox[
                               {
                                RowBox[
                                 {"Native`PrimitiveFunction", "[", "\"C`Free\"", "]"}
                                ],
                                "[",
                                "buf",
                                "]"
                               }
                              ],
                              ";",
                              "\[IndentingNewLine]",
                              "val"
                             }
                            ]
                           }
                          ],
                          "\[IndentingNewLine]",
                          "]"
                         }
                        ]
                       }
                      ],
                      "\[IndentingNewLine]",
                      "]"
                     }
                    ]
                   }
                  ],
                  "\[IndentingNewLine]",
                  "}"
                 }
                ],
                "]"
               }
              ]
             }
            ],
            ";"
           }
          ]
         ],
         "Input",
         CellLabel -> "In[8]:="
        ],
        Cell[
         CellGroupData[
          {
           Cell[
            BoxData[
             RowBox[
              {
               "f",
               "=",
               RowBox[
                {"Compile`CompileToExternalFunction", "[", "prog", "]"}
               ]
              }
             ]
            ],
            "Input",
            CellLabel -> "In[9]:="
           ],
           Cell[
            BoxData[
             InterpretationBox[
              RowBox[
               {
                TagBox["CompiledCodeFunction", "SummaryHead"],
                "[",
                DynamicModuleBox[
                 {Typeset`open$$ = False, Typeset`embedState$$ = "Ready"},
                 TemplateBox[
                  {
                   PaneSelectorBox[
                    {
                     False -> GridBox[
                      {
                       {
                        GraphicsBox[
                         InsetBox[
                          FormBox[
                           StyleBox[
                            "\"Code\"",
                            GrayLevel[0.7],
                            Bold,
                            8.,
                            StripOnInput -> False
                           ],
                           TraditionalForm
                          ],
                          {0, 0}
                         ],
                         Background -> GrayLevel[0.93],
                         Axes -> False,
                         AspectRatio -> 1,
                         ImageSize -> {
                          Automatic,
                          Dynamic[
                           Times[
                            3.5,
                            Times[
                             CurrentValue["FontCapHeight"],
                             AbsoluteCurrentValue[Magnification]^(-1)
                            ]
                           ],
                           ImageSizeCache -> {27., {0., 10.}}
                          ]
                         },
                         Frame -> True,
                         FrameTicks -> None,
                         FrameStyle -> Directive[Thickness[Tiny], GrayLevel[0.55]]
                        ],
                        GridBox[
                         {
                          {
                           RowBox[
                            {
                             TagBox["\"Signature: \"", "SummaryItemAnnotation"],
                             "\[InvisibleSpace]",
                             TagBox[
                              RowBox[
                               {
                                RowBox[{"{", "\"Integer64\"", "}"}],
                                "\[Rule]",
                                "\"Integer64\""
                               }
                              ],
                              "SummaryItem"
                             ]
                            }
                           ]
                          }
                         },
                         GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Automatic}}},
                         AutoDelete -> False,
                         GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                         GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
                         BaseStyle -> {
                          ShowStringCharacters -> False,
                          NumberMarks -> False,
                          PrintPrecision -> 3,
                          ShowSyntaxStyles -> False
                         }
                        ]
                       }
                      },
                      GridBoxAlignment -> {"Rows" -> {{Top}}},
                      AutoDelete -> False,
                      GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                      BaselinePosition -> {1, 1}
                     ],
                     True -> GridBox[
                      {
                       {
                        GraphicsBox[
                         InsetBox[
                          FormBox[
                           StyleBox[
                            "\"Code\"",
                            GrayLevel[0.7],
                            Bold,
                            8.,
                            StripOnInput -> False
                           ],
                           TraditionalForm
                          ],
                          {0, 0}
                         ],
                         Background -> GrayLevel[0.93],
                         Axes -> False,
                         AspectRatio -> 1,
                         ImageSize -> {
                          Automatic,
                          Dynamic[
                           Times[
                            3.5,
                            Times[
                             CurrentValue["FontCapHeight"],
                             AbsoluteCurrentValue[Magnification]^(-1)
                            ]
                           ],
                           ImageSizeCache -> {27., {0., 10.}}
                          ]
                         },
                         Frame -> True,
                         FrameTicks -> None,
                         FrameStyle -> Directive[Thickness[Tiny], GrayLevel[0.55]]
                        ],
                        GridBox[
                         {
                          {
                           RowBox[
                            {
                             TagBox["\"Signature: \"", "SummaryItemAnnotation"],
                             "\[InvisibleSpace]",
                             TagBox[
                              RowBox[
                               {
                                RowBox[{"{", "\"Integer64\"", "}"}],
                                "\[Rule]",
                                "\"Integer64\""
                               }
                              ],
                              "SummaryItem"
                             ]
                            }
                           ]
                          }
                         },
                         GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Automatic}}},
                         AutoDelete -> False,
                         GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                         GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
                         BaseStyle -> {
                          ShowStringCharacters -> False,
                          NumberMarks -> False,
                          PrintPrecision -> 3,
                          ShowSyntaxStyles -> False
                         }
                        ]
                       }
                      },
                      GridBoxAlignment -> {"Rows" -> {{Top}}},
                      AutoDelete -> False,
                      GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                      BaselinePosition -> {1, 1}
                     ]
                    },
                    Dynamic[Typeset`open$$],
                    ImageSize -> Automatic
                   ]
                  },
                  "SummaryPanel"
                 ],
                 DynamicModuleValues :> { }
                ],
                "]"
               }
              ],
              CompiledCodeFunction[
               Association[
                "Signature" -> TypeSpecifier[{"Integer64"} -> "Integer64"],
                "Input" -> Program[
                 {
                  DeclareFunction[
                   Native`PrimitiveFunction["C`Malloc"],
                   TypeFramework`MetaData[Association["Linkage" -> "ExternalLibrary", "ExternalFunctionName" -> "malloc"]][
                    TypeSpecifier[{"MachineInteger"} -> "VoidHandle"]
                   ]
                  ],
                  DeclareFunction[
                   Native`PrimitiveFunction["C`Free"],
                   TypeFramework`MetaData[Association["Linkage" -> "ExternalLibrary", "ExternalFunctionName" -> "free"]][
                    TypeSpecifier[{"VoidHandle"} -> "Void"]
                   ]
                  ],
                  Function[
                   {Typed[sz, "Integer64"]},
                   Module[
                    {buf, arry, val},
                    buf = Native`PrimitiveFunction["C`Malloc"][sz];
                    arry = Native`BitCast[buf, "CArray"["Integer64"]];
                    val = arry[[0]];
                    Native`PrimitiveFunction["C`Free"][buf];
                    val
                   ]
                  ]
                 }
                ],
                "ErrorFunction" -> Null,
                "SystemID" -> "Windows-x86-64",
                "VersionData" -> {12., 0, 0},
                "orcInstance" -> 1051684016,
                "orcModuleId" -> 0,
                "targetMachineId" -> 1052244512
               ],
               85987304,
               85987288,
               85987312,
               "{\"Integer64\"} -> \"Integer64\""
              ],
              Editable -> False,
              SelectWithContents -> True,
              Selectable -> False
             ]
            ],
            "Output",
            CellLabel -> "Out[9]="
           ]
          },
          Open
         ]
        ],
        Cell[
         CellGroupData[
          {
           Cell[
            BoxData[RowBox[{"f", "[", "3", "]"}]],
            "Input",
            CellLabel -> "In[13]:="
           ],
           Cell[
            BoxData["38520976"],
            "Output",
            CellLabel -> "Out[13]="
           ]
          },
          Open
         ]
        ]
       },
       Open
      ]
     ],
     Cell[
      CellGroupData[
       {
        Cell["Memory", "Section"],
        Cell[
         CellGroupData[
          {
           Cell["Manage your own memory", "Subsection"],
           Cell[
            BoxData[
             {
              RowBox[
               {
                RowBox[
                 {
                  "alloc",
                  "=",
                  RowBox[
                   {
                    "Compile`CompileToExternalFunction",
                    "@",
                    RowBox[
                     {
                      "Compile`Program",
                      "[",
                      RowBox[
                       {
                        "{",
                        "\[IndentingNewLine]",
                        RowBox[
                         {
                          RowBox[
                           {
                            "Compile`DeclareFunction",
                            "[",
                            "\[IndentingNewLine]",
                            RowBox[
                             {
                              RowBox[
                               {"Native`PrimitiveFunction", "[", "\"C`Malloc\"", "]"}
                              ],
                              ",",
                              "\[IndentingNewLine]",
                              RowBox[
                               {
                                RowBox[
                                 {
                                  "TypeFramework`MetaData",
                                  "[",
                                  RowBox[
                                   {
                                    "<|",
                                    RowBox[
                                     {
                                      RowBox[{"\"Linkage\"", "\[Rule]", "\"ExternalLibrary\""}],
                                      ",",
                                      RowBox[
                                       {"\"ExternalFunctionName\"", "\[Rule]", "\"malloc\""}
                                      ]
                                     }
                                    ],
                                    "|>"
                                   }
                                  ],
                                  "]"
                                 }
                                ],
                                "@",
                                RowBox[
                                 {
                                  "TypeSpecifier",
                                  "[",
                                  RowBox[
                                   {
                                    RowBox[{"{", "\"MachineInteger\"", "}"}],
                                    "\[Rule]",
                                    "\"VoidHandle\""
                                   }
                                  ],
                                  "]"
                                 }
                                ]
                               }
                              ]
                             }
                            ],
                            "\[IndentingNewLine]",
                            "]"
                           }
                          ],
                          ",",
                          "\[IndentingNewLine]",
                          RowBox[
                           {
                            "Function",
                            "[",
                            RowBox[
                             {
                              RowBox[
                               {
                                "{",
                                RowBox[
                                 {"Typed", "[", RowBox[{"sz", ",", "\"Integer64\""}], "]"}
                                ],
                                "}"
                               }
                              ],
                              ",",
                              "\[IndentingNewLine]",
                              RowBox[
                               {
                                "Module",
                                "[",
                                RowBox[
                                 {
                                  RowBox[{"{", "buf", "}"}],
                                  ",",
                                  "\[IndentingNewLine]",
                                  RowBox[
                                   {
                                    RowBox[
                                     {
                                      "buf",
                                      "=",
                                      RowBox[
                                       {
                                        RowBox[
                                         {"Native`PrimitiveFunction", "[", "\"C`Malloc\"", "]"}
                                        ],
                                        "[",
                                        "sz",
                                        "]"
                                       }
                                      ]
                                     }
                                    ],
                                    ";",
                                    "\[IndentingNewLine]",
                                    RowBox[
                                     {
                                      "Native`BitCast",
                                      "[",
                                      RowBox[{"buf", ",", "\"Integer64\""}],
                                      "]"
                                     }
                                    ]
                                   }
                                  ]
                                 }
                                ],
                                "\[IndentingNewLine]",
                                "]"
                               }
                              ]
                             }
                            ],
                            "\[IndentingNewLine]",
                            "]"
                           }
                          ]
                         }
                        ],
                        "\[IndentingNewLine]",
                        "}"
                       }
                      ],
                      "]"
                     }
                    ]
                   }
                  ]
                 }
                ],
                ";"
               }
              ],
              "\[IndentingNewLine]",
              RowBox[
               {
                RowBox[
                 {
                  "free",
                  "=",
                  RowBox[
                   {
                    "Compile`CompileToExternalFunction",
                    "@",
                    RowBox[
                     {
                      "Compile`Program",
                      "[",
                      RowBox[
                       {
                        "{",
                        "\[IndentingNewLine]",
                        RowBox[
                         {
                          RowBox[
                           {
                            "Compile`DeclareFunction",
                            "[",
                            "\[IndentingNewLine]",
                            RowBox[
                             {
                              RowBox[
                               {"Native`PrimitiveFunction", "[", "\"C`Free\"", "]"}
                              ],
                              ",",
                              "\[IndentingNewLine]",
                              RowBox[
                               {
                                RowBox[
                                 {
                                  "TypeFramework`MetaData",
                                  "[",
                                  RowBox[
                                   {
                                    "<|",
                                    RowBox[
                                     {
                                      RowBox[{"\"Linkage\"", "\[Rule]", "\"ExternalLibrary\""}],
                                      ",",
                                      RowBox[{"\"ExternalFunctionName\"", "\[Rule]", "\"free\""}]
                                     }
                                    ],
                                    "|>"
                                   }
                                  ],
                                  "]"
                                 }
                                ],
                                "@",
                                RowBox[
                                 {
                                  "TypeSpecifier",
                                  "[",
                                  RowBox[
                                   {
                                    RowBox[{"{", "\"VoidHandle\"", "}"}],
                                    "\[Rule]",
                                    "\"Void\""
                                   }
                                  ],
                                  "]"
                                 }
                                ]
                               }
                              ]
                             }
                            ],
                            "\[IndentingNewLine]",
                            "]"
                           }
                          ],
                          ",",
                          "\[IndentingNewLine]",
                          RowBox[
                           {
                            "Function",
                            "[",
                            RowBox[
                             {
                              RowBox[
                               {
                                "{",
                                RowBox[
                                 {"Typed", "[", RowBox[{"ptr", ",", "\"Integer64\""}], "]"}
                                ],
                                "}"
                               }
                              ],
                              ",",
                              "\[IndentingNewLine]",
                              RowBox[
                               {
                                "Module",
                                "[",
                                RowBox[
                                 {
                                  RowBox[
                                   {
                                    "{",
                                    RowBox[
                                     {
                                      RowBox[
                                       {"handle", "=", RowBox[{"Native`Handle", "[", "]"}]}
                                      ],
                                      ",",
                                      "tmp"
                                     }
                                    ],
                                    "}"
                                   }
                                  ],
                                  ",",
                                  "\[IndentingNewLine]",
                                  RowBox[
                                   {
                                    RowBox[
                                     {"Native`Store", "[", RowBox[{"handle", ",", "ptr"}], "]"}
                                    ],
                                    ";",
                                    "\[IndentingNewLine]",
                                    RowBox[
                                     {
                                      "tmp",
                                      "=",
                                      RowBox[
                                       {
                                        "Native`BitCast",
                                        "[",
                                        RowBox[{"handle", ",", "\"VoidHandle\""}],
                                        "]"
                                       }
                                      ]
                                     }
                                    ],
                                    ";",
                                    "\[IndentingNewLine]",
                                    RowBox[
                                     {
                                      RowBox[
                                       {"Native`PrimitiveFunction", "[", "\"C`Free\"", "]"}
                                      ],
                                      "[",
                                      "tmp",
                                      "]"
                                     }
                                    ],
                                    ";",
                                    "\[IndentingNewLine]",
                                    "0"
                                   }
                                  ]
                                 }
                                ],
                                "\[IndentingNewLine]",
                                "]"
                               }
                              ]
                             }
                            ],
                            "\[IndentingNewLine]",
                            "]"
                           }
                          ]
                         }
                        ],
                        "\[IndentingNewLine]",
                        "}"
                       }
                      ],
                      "]"
                     }
                    ]
                   }
                  ]
                 }
                ],
                ";"
               }
              ]
             }
            ],
            "Input",
            CellLabel -> "In[19]:="
           ],
           Cell[
            BoxData[
             RowBox[
              {
               RowBox[
                {
                 "setElement",
                 "=",
                 RowBox[
                  {
                   "Compile`CompileToExternalFunction",
                   "@",
                   RowBox[
                    {
                     "Function",
                     "[",
                     "\[IndentingNewLine]",
                     RowBox[
                      {
                       RowBox[
                        {
                         "{",
                         RowBox[
                          {
                           RowBox[
                            {"Typed", "[", RowBox[{"ptr", ",", "\"Integer64\""}], "]"}
                           ],
                           ",",
                           RowBox[
                            {"Typed", "[", RowBox[{"pos", ",", "\"Integer64\""}], "]"}
                           ],
                           ",",
                           RowBox[
                            {"Typed", "[", RowBox[{"val", ",", "\"Integer64\""}], "]"}
                           ]
                          }
                         ],
                         "}"
                        }
                       ],
                       ",",
                       "\[IndentingNewLine]",
                       RowBox[
                        {
                         "Module",
                         "[",
                         RowBox[
                          {
                           RowBox[
                            {
                             "{",
                             RowBox[
                              {
                               RowBox[
                                {"handle", "=", RowBox[{"Native`Handle", "[", "]"}]}
                               ],
                               ",",
                               "tmp",
                               ",",
                               "buf"
                              }
                             ],
                             "}"
                            }
                           ],
                           ",",
                           "\[IndentingNewLine]",
                           RowBox[
                            {
                             RowBox[
                              {"Native`Store", "[", RowBox[{"handle", ",", "ptr"}], "]"}
                             ],
                             ";",
                             "\[IndentingNewLine]",
                             RowBox[
                              {
                               "tmp",
                               "=",
                               RowBox[
                                {
                                 "Native`BitCast",
                                 "[",
                                 RowBox[
                                  {
                                   "handle",
                                   ",",
                                   RowBox[
                                    {
                                     "\"Handle\"",
                                     "@",
                                     RowBox[{"\"CArray\"", "[", "\"Integer64\"", "]"}]
                                    }
                                   ]
                                  }
                                 ],
                                 "]"
                                }
                               ]
                              }
                             ],
                             ";",
                             "\[IndentingNewLine]",
                             RowBox[
                              {"buf", "=", RowBox[{"Native`Load", "[", "tmp", "]"}]}
                             ],
                             ";",
                             "\[IndentingNewLine]",
                             RowBox[
                              {
                               RowBox[{"buf", "[", RowBox[{"[", "pos", "]"}], "]"}],
                               "=",
                               "val"
                              }
                             ],
                             ";",
                             "\[IndentingNewLine]",
                             "val"
                            }
                           ]
                          }
                         ],
                         "\[IndentingNewLine]",
                         "]"
                        }
                       ]
                      }
                     ],
                     "\[IndentingNewLine]",
                     "]"
                    }
                   ]
                  }
                 ]
                }
               ],
               ";"
              }
             ]
            ],
            "Input",
            CellLabel -> "In[16]:="
           ],
           Cell[
            BoxData[
             RowBox[
              {
               RowBox[
                {
                 "getElement",
                 "=",
                 RowBox[
                  {
                   "Compile`CompileToExternalFunction",
                   "@",
                   RowBox[
                    {
                     "Function",
                     "[",
                     "\[IndentingNewLine]",
                     RowBox[
                      {
                       RowBox[
                        {
                         "{",
                         RowBox[
                          {
                           RowBox[
                            {"Typed", "[", RowBox[{"ptr", ",", "\"Integer64\""}], "]"}
                           ],
                           ",",
                           RowBox[
                            {"Typed", "[", RowBox[{"pos", ",", "\"Integer64\""}], "]"}
                           ]
                          }
                         ],
                         "}"
                        }
                       ],
                       ",",
                       "\[IndentingNewLine]",
                       RowBox[
                        {
                         "Module",
                         "[",
                         RowBox[
                          {
                           RowBox[
                            {
                             "{",
                             RowBox[
                              {
                               RowBox[
                                {"handle", "=", RowBox[{"Native`Handle", "[", "]"}]}
                               ],
                               ",",
                               "tmp",
                               ",",
                               "buf"
                              }
                             ],
                             "}"
                            }
                           ],
                           ",",
                           "\[IndentingNewLine]",
                           RowBox[
                            {
                             RowBox[
                              {"Native`Store", "[", RowBox[{"handle", ",", "ptr"}], "]"}
                             ],
                             ";",
                             "\[IndentingNewLine]",
                             RowBox[
                              {
                               "tmp",
                               "=",
                               RowBox[
                                {
                                 "Native`BitCast",
                                 "[",
                                 RowBox[
                                  {
                                   "handle",
                                   ",",
                                   RowBox[
                                    {
                                     "\"Handle\"",
                                     "@",
                                     RowBox[{"\"CArray\"", "[", "\"Integer64\"", "]"}]
                                    }
                                   ]
                                  }
                                 ],
                                 "]"
                                }
                               ]
                              }
                             ],
                             ";",
                             "\[IndentingNewLine]",
                             RowBox[
                              {"buf", "=", RowBox[{"Native`Load", "[", "tmp", "]"}]}
                             ],
                             ";",
                             "\[IndentingNewLine]",
                             RowBox[{"buf", "[", RowBox[{"[", "pos", "]"}], "]"}]
                            }
                           ]
                          }
                         ],
                         "\[IndentingNewLine]",
                         "]"
                        }
                       ]
                      }
                     ],
                     "\[IndentingNewLine]",
                     "]"
                    }
                   ]
                  }
                 ]
                }
               ],
               ";"
              }
             ]
            ],
            "Input",
            CellLabel -> "In[17]:="
           ],
           Cell[
            CellGroupData[
             {
              Cell[
               BoxData[
                RowBox[{"ptr", "=", RowBox[{"alloc", "[", "5", "]"}]}]
               ],
               "Input",
               CellLabel -> "In[21]:="
              ],
              Cell[
               BoxData["90259600"],
               "Output",
               CellLabel -> "Out[21]="
              ]
             },
             Open
            ]
           ],
           Cell[
            CellGroupData[
             {
              Cell[
               BoxData[
                RowBox[
                 {
                  "setElement",
                  "[",
                  RowBox[{"ptr", ",", "2", ",", "67"}],
                  "]"
                 }
                ]
               ],
               "Input",
               CellLabel -> "In[28]:="
              ],
              Cell[BoxData["67"], "Output", CellLabel -> "Out[28]="]
             },
             Open
            ]
           ],
           Cell[
            CellGroupData[
             {
              Cell[
               BoxData[
                RowBox[{"getElement", "[", RowBox[{"ptr", ",", "2"}], "]"}]
               ],
               "Input",
               CellLabel -> "In[29]:="
              ],
              Cell[BoxData["67"], "Output", CellLabel -> "Out[29]="]
             },
             Open
            ]
           ],
           Cell[
            CellGroupData[
             {
              Cell[
               BoxData[RowBox[{"free", "[", "ptr", "]"}]],
               "Input",
               CellLabel -> "In[26]:="
              ],
              Cell[BoxData["0"], "Output", CellLabel -> "Out[26]="]
             },
             Open
            ]
           ]
          },
          Open
         ]
        ]
       },
       Open
      ]
     ],
     Cell[
      CellGroupData[
       {
        Cell["Language", "Section"],
        Cell[
         CellGroupData[
          {
           Cell["Rust", "Subsection"],
           Cell[
            BoxData[
             RowBox[
              {
               RowBox[
                {"toLLVMIR", "[", RowBox[{"\"Rust\"", ",", "code_"}], "]"}
               ],
               ":=",
               RowBox[
                {
                 "Module",
                 "[",
                 "\[IndentingNewLine]",
                 RowBox[
                  {
                   RowBox[
                    {"{", RowBox[{"f", ",", "outFile", ",", "out"}], "}"}
                   ],
                   ",",
                   "\[IndentingNewLine]",
                   RowBox[
                    {
                     RowBox[
                      {
                       "Quiet",
                       "@",
                       RowBox[
                        {
                         "CreateDirectory",
                         "[",
                         RowBox[
                          {
                           RowBox[
                            {
                             "FileNameJoin",
                             "@",
                             RowBox[
                              {
                               "{",
                               RowBox[{"$TemporaryDirectory", ",", "\"rust\""}],
                               "}"
                              }
                             ]
                            }
                           ],
                           ",",
                           RowBox[{"CreateIntermediateDirectories", "->", "True"}]
                          }
                         ],
                         "]"
                        }
                       ]
                      }
                     ],
                     ";",
                     "\[IndentingNewLine]",
                     RowBox[
                      {
                       "f",
                       "=",
                       RowBox[
                        {
                         "CreateFile",
                         "[",
                         RowBox[
                          {
                           "FileNameJoin",
                           "@",
                           RowBox[
                            {
                             "{",
                             RowBox[
                              {"$TemporaryDirectory", ",", "\"rust\"", ",", "\"t.rs\""}
                             ],
                             "}"
                            }
                           ]
                          }
                         ],
                         "]"
                        }
                       ]
                      }
                     ],
                     ";",
                     "\[IndentingNewLine]",
                     RowBox[
                      {
                       "WriteString",
                       "[",
                       RowBox[
                        {
                         "f",
                         ",",
                         RowBox[
                          {
                           "code",
                           "<>",
                           "\"\\npub fn main() {/*stub provided by Compiler Explorer*/}\""
                          }
                         ]
                        }
                       ],
                       "]"
                      }
                     ],
                     ";",
                     "\[IndentingNewLine]",
                     RowBox[
                      {
                       "outFile",
                       "=",
                       RowBox[
                        {
                         "FileNameJoin",
                         "[",
                         RowBox[
                          {
                           "{",
                           RowBox[
                            {
                             RowBox[{"DirectoryName", "[", "f", "]"}],
                             ",",
                             "\"test.ll\""
                            }
                           ],
                           "}"
                          }
                         ],
                         "]"
                        }
                       ]
                      }
                     ],
                     ";",
                     "\[IndentingNewLine]",
                     RowBox[
                      {
                       "out",
                       "=",
                       RowBox[
                        {
                         "RunProcess",
                         "[",
                         RowBox[
                          {
                           "{",
                           RowBox[
                            {
                             "\"rustc\"",
                             ",",
                             "\"-o\"",
                             ",",
                             "outFile",
                             ",",
                             "\"--emit=llvm-ir\"",
                             ",",
                             "f"
                            }
                           ],
                           "}"
                          }
                         ],
                         "]"
                        }
                       ]
                      }
                     ],
                     ";",
                     "\[IndentingNewLine]",
                     RowBox[{"DeleteFile", "[", "outFile", "]"}],
                     ";",
                     "\[IndentingNewLine]",
                     "out"
                    }
                   ]
                  }
                 ],
                 "\[IndentingNewLine]",
                 "]"
                }
               ]
              }
             ]
            ],
            "Input"
           ]
          },
          Open
         ]
        ]
       },
       Open
      ]
     ],
     Cell[
      CellGroupData[
       {
        Cell["Data structures / Algorithms", "Section"],
        Cell[
         CellGroupData[
          {
           Cell["BitVector", "Subsection"],
           Cell[
            CellGroupData[
             {
              Cell[
               BoxData[RowBox[{"?", "*`*BitVector*"}]],
               "Input",
               CellLabel -> "In[11]:="
              ],
              Cell[
               BoxData[
                StyleBox[
                 FrameBox[
                  GridBox[
                   {
                    {
                     DynamicModuleBox[
                      {Typeset`open$$ = True},
                      PaneSelectorBox[
                       {
                        False -> ButtonBox[
                         RowBox[
                          {
                           DynamicBox[
                            FEPrivate`FrontEndResource[
                             "FEBitmaps",
                             "RightPointerOpener"
                            ]
                           ],
                           " ",
                           StyleBox[
                            "Compile`Utilities`DataStructure`BitVector`",
                            "InformationGridGroupHeader"
                           ]
                          }
                         ],
                         Appearance -> None,
                         BaseStyle -> "InformationGridLink",
                         ButtonFunction :> FEPrivate`Set[Typeset`open$$, True],
                         Evaluator -> Automatic,
                         Method -> "Preemptive"
                        ],
                        True -> PaneBox[
                         GridBox[
                          {
                           {
                            ButtonBox[
                             RowBox[
                              {
                               DynamicBox[
                                FEPrivate`FrontEndResource[
                                 "FEBitmaps",
                                 "DownPointerOpener"
                                ],
                                ImageSizeCache -> {10., {2., 8.}}
                               ],
                               " ",
                               StyleBox[
                                "Compile`Utilities`DataStructure`BitVector`",
                                "InformationGridGroupHeader"
                               ]
                              }
                             ],
                             Appearance -> None,
                             BaseStyle -> "InformationGridLink",
                             ButtonFunction :> FEPrivate`Set[Typeset`open$$, False],
                             Evaluator -> Automatic,
                             Method -> "Preemptive"
                            ]
                           },
                           {
                            PaneBox[
                             GridBox[
                              {
                               {
                                ButtonBox[
                                 StyleBox["BitVector", "InformationGridButton"],
                                 Appearance -> None,
                                 BaseStyle -> "InformationGridLink",
                                 ButtonData :> {
                                  "Info-ada13634-5aa5-40b7-be9a-53e80b1723ce",
                                  {"BitVector", "Compile`Utilities`DataStructure`BitVector`"},
                                  False
                                 },
                                 ButtonNote -> "Compile`Utilities`DataStructure`BitVector`",
                                 Evaluator -> Automatic
                                ]
                               },
                               {
                                ButtonBox[
                                 StyleBox["BitVectorClass", "InformationGridButton"],
                                 Appearance -> None,
                                 BaseStyle -> "InformationGridLink",
                                 ButtonData :> {
                                  "Info-ada13634-5aa5-40b7-be9a-53e80b1723ce",
                                  {
                                   "BitVectorClass",
                                   "Compile`Utilities`DataStructure`BitVector`"
                                  },
                                  False
                                 },
                                 ButtonNote -> "Compile`Utilities`DataStructure`BitVector`",
                                 Evaluator -> Automatic
                                ]
                               },
                               {
                                ButtonBox[
                                 StyleBox["BitVectorQ", "InformationGridButton"],
                                 Appearance -> None,
                                 BaseStyle -> "InformationGridLink",
                                 ButtonData :> {
                                  "Info-ada13634-5aa5-40b7-be9a-53e80b1723ce",
                                  {
                                   "BitVectorQ",
                                   "Compile`Utilities`DataStructure`BitVector`"
                                  },
                                  False
                                 },
                                 ButtonNote -> "Compile`Utilities`DataStructure`BitVector`",
                                 Evaluator -> Automatic
                                ]
                               },
                               {
                                ButtonBox[
                                 StyleBox["CreateBitVector", "InformationGridButton"],
                                 Appearance -> None,
                                 BaseStyle -> "InformationGridLink",
                                 ButtonData :> {
                                  "Info-ada13634-5aa5-40b7-be9a-53e80b1723ce",
                                  {
                                   "CreateBitVector",
                                   "Compile`Utilities`DataStructure`BitVector`"
                                  },
                                  False
                                 },
                                 ButtonNote -> "Compile`Utilities`DataStructure`BitVector`",
                                 Evaluator -> Automatic
                                ]
                               }
                              },
                              DefaultBaseStyle -> "Text",
                              GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Baseline}}},
                              GridBoxItemSize -> {"Columns" -> {{Scaled[0.95]}}}
                             ],
                             ImageMargins -> {{10, 0}, {0, 2}}
                            ]
                           }
                          },
                          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Baseline}}}
                         ],
                         FrameMargins -> {{0, 0}, {8, 0}}
                        ]
                       },
                       Dynamic[Typeset`open$$],
                       ImageSize -> Automatic
                      ]
                     ]
                    }
                   },
                   GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Baseline}}},
                   GridBoxDividers -> {"ColumnsIndexed" -> {{False}}, "RowsIndexed" -> {}},
                   GridBoxSpacings -> {
                    "Columns" -> {
                     Offset[0.27999999999999997],
                     {Offset[0.5599999999999999]},
                     Offset[0.27999999999999997]
                    },
                    "Rows" -> {Offset[0.2], {Offset[0.8]}, Offset[0.2]}
                   }
                  ],
                  BaseStyle -> "InformationTitleFrame"
                 ],
                 "InformationGridPlain"
                ]
               ],
               "Output",
               CellLabel -> "Out[11]="
              ]
             },
             Open
            ]
           ],
           Cell[
            BoxData[
             RowBox[
              {
               RowBox[
                {
                 "GeneralUtilities`PrintDefinitions",
                 "[",
                 "\"Compile`Utilities`DataStructure`BitVector`CreateBitVector\"",
                 "]"
                }
               ],
               ";"
              }
             ]
            ],
            "Input",
            CellLabel -> "In[17]:="
           ],
           Cell[
            BoxData[
             RowBox[
              {
               RowBox[
                {
                 "GeneralUtilities`PrintDefinitions",
                 "[",
                 "\"Compile`Utilities`DataStructure`BitVector`BitVectorClass\"",
                 "]"
                }
               ],
               ";"
              }
             ]
            ],
            "Input",
            CellLabel -> "In[27]:="
           ],
           Cell[
            CellGroupData[
             {
              Cell[
               BoxData[
                RowBox[
                 {
                  "bv",
                  "=",
                  RowBox[
                   {
                    "Compile`Utilities`DataStructure`BitVector`CreateBitVector",
                    "[",
                    RowBox[
                     {
                      "{",
                      RowBox[
                       {
                        "\"apple\"",
                        ",",
                        "\"orange\"",
                        ",",
                        "\"pear\"",
                        ",",
                        "\"mango\"",
                        ",",
                        "\"cherry\"",
                        ",",
                        "\"lemon\"",
                        ",",
                        "\"pinapple\"",
                        ",",
                        "\"guava\"",
                        ",",
                        "\"grape\""
                       }
                      ],
                      "}"
                     }
                    ],
                    "]"
                   }
                  ]
                 }
                ]
               ],
               "Input",
               CellLabel -> "In[30]:="
              ],
              Cell[
               BoxData[
                InterpretationBox[
                 RowBox[
                  {
                   TagBox[
                    "Compile`Utilities`DataStructure`BitVector`BitVector",
                    "SummaryHead"
                   ],
                   "[",
                   DynamicModuleBox[
                    {Typeset`open$$ = False, Typeset`embedState$$ = "Ready"},
                    TemplateBox[
                     {
                      PaneSelectorBox[
                       {
                        False -> GridBox[
                         {
                          {
                           GraphicsBox[
                            InsetBox[
                             FormBox[
                              StyleBox[
                               "\"BVec\"",
                               GrayLevel[0.7],
                               Bold,
                               8.,
                               StripOnInput -> False
                              ],
                              TraditionalForm
                             ],
                             {0, 0}
                            ],
                            Background -> GrayLevel[0.93],
                            Axes -> False,
                            AspectRatio -> 1,
                            ImageSize -> {
                             Automatic,
                             Dynamic[
                              Times[
                               3.5,
                               Times[
                                CurrentValue["FontCapHeight"],
                                AbsoluteCurrentValue[Magnification]^(-1)
                               ]
                              ],
                              ImageSizeCache -> {27., {0., 10.}}
                             ]
                            },
                            Frame -> True,
                            FrameTicks -> None,
                            FrameStyle -> Directive[Thickness[Tiny], GrayLevel[0.55]]
                           ],
                           GridBox[
                            {
                             {
                              RowBox[
                               {
                                TagBox["\"elements: \"", "SummaryItemAnnotation"],
                                "\[InvisibleSpace]",
                                TagBox[RowBox[{"{", "}"}], "SummaryItem"]
                               }
                              ]
                             }
                            },
                            GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Automatic}}},
                            AutoDelete -> False,
                            GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                            GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
                            BaseStyle -> {
                             ShowStringCharacters -> False,
                             NumberMarks -> False,
                             PrintPrecision -> 3,
                             ShowSyntaxStyles -> False
                            }
                           ]
                          }
                         },
                         GridBoxAlignment -> {"Rows" -> {{Top}}},
                         AutoDelete -> False,
                         GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                         BaselinePosition -> {1, 1}
                        ],
                        True -> GridBox[
                         {
                          {
                           GraphicsBox[
                            InsetBox[
                             FormBox[
                              StyleBox[
                               "\"BVec\"",
                               GrayLevel[0.7],
                               Bold,
                               8.,
                               StripOnInput -> False
                              ],
                              TraditionalForm
                             ],
                             {0, 0}
                            ],
                            Background -> GrayLevel[0.93],
                            Axes -> False,
                            AspectRatio -> 1,
                            ImageSize -> {
                             Automatic,
                             Dynamic[
                              Times[
                               3.5,
                               Times[
                                CurrentValue["FontCapHeight"],
                                AbsoluteCurrentValue[Magnification]^(-1)
                               ]
                              ],
                              ImageSizeCache -> {27., {0., 10.}}
                             ]
                            },
                            Frame -> True,
                            FrameTicks -> None,
                            FrameStyle -> Directive[Thickness[Tiny], GrayLevel[0.55]]
                           ],
                           GridBox[
                            {
                             {
                              RowBox[
                               {
                                TagBox["\"elements: \"", "SummaryItemAnnotation"],
                                "\[InvisibleSpace]",
                                TagBox[RowBox[{"{", "}"}], "SummaryItem"]
                               }
                              ]
                             }
                            },
                            GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Automatic}}},
                            AutoDelete -> False,
                            GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                            GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
                            BaseStyle -> {
                             ShowStringCharacters -> False,
                             NumberMarks -> False,
                             PrintPrecision -> 3,
                             ShowSyntaxStyles -> False
                            }
                           ]
                          }
                         },
                         GridBoxAlignment -> {"Rows" -> {{Top}}},
                         AutoDelete -> False,
                         GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                         BaselinePosition -> {1, 1}
                        ]
                       },
                       Dynamic[Typeset`open$$],
                       ImageSize -> Automatic
                      ]
                     },
                     "SummaryPanel"
                    ],
                    DynamicModuleValues :> { }
                   ],
                   "]"
                  }
                 ],
                 Compile`Utilities`DataStructure`BitVector`BitVector[],
                 Editable -> False,
                 SelectWithContents -> True,
                 Selectable -> False
                ]
               ],
               "Output",
               CellLabel -> "Out[30]="
              ]
             },
             Open
            ]
           ],
           Cell[
            CellGroupData[
             {
              Cell[
               BoxData[RowBox[{"bv", "[", "\"get_elements\"", "]"}]],
               "Input",
               CellLabel -> "In[31]:="
              ],
              Cell[
               BoxData[
                RowBox[
                 {
                  "\[LeftAssociation]",
                  RowBox[
                   {
                    RowBox[{"\"apple\"", "\[Rule]", "1"}],
                    ",",
                    RowBox[{"\"orange\"", "\[Rule]", "2"}],
                    ",",
                    RowBox[{"\"pear\"", "\[Rule]", "3"}],
                    ",",
                    RowBox[{"\"mango\"", "\[Rule]", "4"}],
                    ",",
                    RowBox[{"\"cherry\"", "\[Rule]", "5"}],
                    ",",
                    RowBox[{"\"lemon\"", "\[Rule]", "6"}],
                    ",",
                    RowBox[{"\"pinapple\"", "\[Rule]", "7"}],
                    ",",
                    RowBox[{"\"guava\"", "\[Rule]", "8"}],
                    ",",
                    RowBox[{"\"grape\"", "\[Rule]", "9"}]
                   }
                  ],
                  "\[RightAssociation]"
                 }
                ]
               ],
               "Output",
               CellLabel -> "Out[31]="
              ]
             },
             Open
            ]
           ],
           Cell[
            CellGroupData[
             {
              Cell[
               BoxData[
                RowBox[
                 {
                  "bv",
                  "=",
                  RowBox[
                   {
                    "bv",
                    "[",
                    RowBox[{"\"removeElement\"", ",", "\"orange\""}],
                    "]"
                   }
                  ]
                 }
                ]
               ],
               "Input",
               CellLabel -> "In[34]:="
              ],
              Cell[
               BoxData[
                InterpretationBox[
                 RowBox[
                  {
                   TagBox[
                    "Compile`Utilities`DataStructure`BitVector`BitVector",
                    "SummaryHead"
                   ],
                   "[",
                   DynamicModuleBox[
                    {Typeset`open$$ = False, Typeset`embedState$$ = "Ready"},
                    TemplateBox[
                     {
                      PaneSelectorBox[
                       {
                        False -> GridBox[
                         {
                          {
                           GraphicsBox[
                            InsetBox[
                             FormBox[
                              StyleBox[
                               "\"BVec\"",
                               GrayLevel[0.7],
                               Bold,
                               8.,
                               StripOnInput -> False
                              ],
                              TraditionalForm
                             ],
                             {0, 0}
                            ],
                            Background -> GrayLevel[0.93],
                            Axes -> False,
                            AspectRatio -> 1,
                            ImageSize -> {
                             Automatic,
                             Dynamic[
                              Times[
                               3.5,
                               Times[
                                CurrentValue["FontCapHeight"],
                                AbsoluteCurrentValue[Magnification]^(-1)
                               ]
                              ],
                              ImageSizeCache -> {27., {0., 10.}}
                             ]
                            },
                            Frame -> True,
                            FrameTicks -> None,
                            FrameStyle -> Directive[Thickness[Tiny], GrayLevel[0.55]]
                           ],
                           GridBox[
                            {
                             {
                              RowBox[
                               {
                                TagBox["\"elements: \"", "SummaryItemAnnotation"],
                                "\[InvisibleSpace]",
                                TagBox[RowBox[{"{", "}"}], "SummaryItem"]
                               }
                              ]
                             }
                            },
                            GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Automatic}}},
                            AutoDelete -> False,
                            GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                            GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
                            BaseStyle -> {
                             ShowStringCharacters -> False,
                             NumberMarks -> False,
                             PrintPrecision -> 3,
                             ShowSyntaxStyles -> False
                            }
                           ]
                          }
                         },
                         GridBoxAlignment -> {"Rows" -> {{Top}}},
                         AutoDelete -> False,
                         GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                         BaselinePosition -> {1, 1}
                        ],
                        True -> GridBox[
                         {
                          {
                           GraphicsBox[
                            InsetBox[
                             FormBox[
                              StyleBox[
                               "\"BVec\"",
                               GrayLevel[0.7],
                               Bold,
                               8.,
                               StripOnInput -> False
                              ],
                              TraditionalForm
                             ],
                             {0, 0}
                            ],
                            Background -> GrayLevel[0.93],
                            Axes -> False,
                            AspectRatio -> 1,
                            ImageSize -> {
                             Automatic,
                             Dynamic[
                              Times[
                               3.5,
                               Times[
                                CurrentValue["FontCapHeight"],
                                AbsoluteCurrentValue[Magnification]^(-1)
                               ]
                              ],
                              ImageSizeCache -> {27., {0., 10.}}
                             ]
                            },
                            Frame -> True,
                            FrameTicks -> None,
                            FrameStyle -> Directive[Thickness[Tiny], GrayLevel[0.55]]
                           ],
                           GridBox[
                            {
                             {
                              RowBox[
                               {
                                TagBox["\"elements: \"", "SummaryItemAnnotation"],
                                "\[InvisibleSpace]",
                                TagBox[RowBox[{"{", "}"}], "SummaryItem"]
                               }
                              ]
                             }
                            },
                            GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Automatic}}},
                            AutoDelete -> False,
                            GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                            GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
                            BaseStyle -> {
                             ShowStringCharacters -> False,
                             NumberMarks -> False,
                             PrintPrecision -> 3,
                             ShowSyntaxStyles -> False
                            }
                           ]
                          }
                         },
                         GridBoxAlignment -> {"Rows" -> {{Top}}},
                         AutoDelete -> False,
                         GridBoxItemSize -> {"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
                         BaselinePosition -> {1, 1}
                        ]
                       },
                       Dynamic[Typeset`open$$],
                       ImageSize -> Automatic
                      ]
                     },
                     "SummaryPanel"
                    ],
                    DynamicModuleValues :> { }
                   ],
                   "]"
                  }
                 ],
                 Compile`Utilities`DataStructure`BitVector`BitVector[],
                 Editable -> False,
                 SelectWithContents -> True,
                 Selectable -> False
                ]
               ],
               "Output",
               CellLabel -> "Out[34]="
              ]
             },
             Open
            ]
           ],
           Cell[
            CellGroupData[
             {
              Cell[
               BoxData[RowBox[{"bv", "[", "\"get_elements\"", "]"}]],
               "Input",
               CellLabel -> "In[35]:="
              ],
              Cell[
               BoxData[
                RowBox[
                 {
                  "\[LeftAssociation]",
                  RowBox[
                   {
                    RowBox[{"\"apple\"", "\[Rule]", "1"}],
                    ",",
                    RowBox[{"\"orange\"", "\[Rule]", "2"}],
                    ",",
                    RowBox[{"\"pear\"", "\[Rule]", "3"}],
                    ",",
                    RowBox[{"\"mango\"", "\[Rule]", "4"}],
                    ",",
                    RowBox[{"\"cherry\"", "\[Rule]", "5"}],
                    ",",
                    RowBox[{"\"lemon\"", "\[Rule]", "6"}],
                    ",",
                    RowBox[{"\"pinapple\"", "\[Rule]", "7"}],
                    ",",
                    RowBox[{"\"guava\"", "\[Rule]", "8"}],
                    ",",
                    RowBox[{"\"grape\"", "\[Rule]", "9"}]
                   }
                  ],
                  "\[RightAssociation]"
                 }
                ]
               ],
               "Output",
               CellLabel -> "Out[35]="
              ]
             },
             Open
            ]
           ]
          },
          Open
         ]
        ],
        Cell["HashTable", "Subsection"]
       },
       Open
      ]
     ],
     Cell[
      CellGroupData[
       {
        Cell["Define a 4\[Times]4 SIMD Multiplication", "Section"],
        Cell[
         CellGroupData[
          {
           Cell[
            BoxData[RowBox[{"Names", "[", "\"*`*SIMD*\"", "]"}]],
            "Input",
            CellLabel -> "In[4]:="
           ],
           Cell[
            BoxData[RowBox[{"{", "}"}]],
            "Output",
            CellLabel -> "Out[4]="
           ]
          },
          Open
         ]
        ]
       },
       Open
      ]
     ]
    },
    Open
   ]
  ]
 },
 TrackCellChangeTimes -> False,
 StyleDefinitions -> "Default.nb"
]